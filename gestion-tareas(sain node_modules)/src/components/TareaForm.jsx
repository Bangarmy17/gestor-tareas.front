import { useEffect, useState } from 'react';

const initialDataForm = {
    nombre: '',
    descripcion: '',
    completada: false
};

// eslint-disable-next-line react/prop-types
export const TareaForm = ({tareasSelected,handlerAdd}) => {
    const [form, setForm] = useState(initialDataForm);
    const { nombre, descripcion, completada } = form;
    useEffect(() => {
        console.log('tareasSelected:', tareasSelected);
        if (tareasSelected) {
            setForm(tareasSelected);
        } else {
            setForm(initialDataForm);
        }
    }, [tareasSelected]);
    return (
        <form onSubmit={
            (event) => {
                event.preventDefault();
                if (!nombre || !descripcion) {
                    alert('Datos incompletos');
                    return;
                }
                handlerAdd(form);
                setForm(initialDataForm);
            }
        }>
            <div>
                <input
                    type="text"
                    name="nombre"
                    value={nombre}
                    onChange={(event) => setForm({ ...form, nombre: event.target.value })}
                    placeholder="Nombre"
                />
            </div>
            <div>
                <input
                    type="text"
                    name="descripcion"
                    value={descripcion}
                    onChange={(event) => setForm({ ...form, descripcion: event.target.value })}
                    placeholder="DescripciÃ³n"
                />
            </div>
            <div>
                <input
                    type="checkbox"
                    name="completada"
                    checked={completada}
                    onChange={(event) => setForm({ ...form, completada: event.target.checked })}
                />
            </div>
            <div>
                <button type="submit">Guardar</button>
            </div>
        </form>
    )
}